(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(15),a=t.n(r),i=t(6),o=t(3),u=t(4),l=t.n(u),d="/api/persons",s={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},add:function(e){return l.a.post(d,e).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},update:function(e){return l.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))}},m=t(0),b=function(e){var n=e.handleFilter,t=e.nameFilter;return Object(m.jsxs)("div",{children:["filter shown with: ",Object(m.jsx)("input",{onChange:n,value:t})]})},f=function(e){var n=e.handleNameField,t=e.handleNumberField,c=e.handleSubmit,r=e.newName,a=e.newNumber;return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{onChange:n,value:r})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{onChange:t,value:a})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})})},j=function(e){var n=e.person,t=e.removeName;return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[n.name," ",n.number,Object(m.jsx)("button",{onClick:t,children:"remove"})]},n.name)})},h=function(e){var n=e.persons,t=e.nameFilter,c=e.removeName;return Object(m.jsx)("div",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(m.jsx)(j,{person:e,removeName:function(){return c(e.name,e.id)}},e.id)}))})},v=(t(39),function(e){var n=e.message,t=e.color;if(null===n)return null;var c={color:"".concat(t.main),borderColor:"".concat(t.main),backgroundColor:"".concat(t.back)};return Object(m.jsx)("div",{className:"notification",style:c,children:n})}),O=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(o.a)(a,2),l=u[0],d=u[1],j=Object(c.useState)(""),O=Object(o.a)(j,2),p=O[0],x=O[1],g=Object(c.useState)(""),w=Object(o.a)(g,2),k=w[0],N=w[1],C=Object(c.useState)(null),F=Object(o.a)(C,2),S=F[0],y=F[1],T=Object(c.useState)({main:"green",back:"lightgreen"}),A=Object(o.a)(T,2),L=A[0],E=A[1];Object(c.useEffect)((function(){s.getAll().then((function(e){return r(e)}))}),[]);var J=function(){d(""),x("")};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(b,{handleFilter:function(e){return N(e.target.value)},nameFilter:k}),Object(m.jsx)("h3",{children:"Add new number"}),Object(m.jsx)(f,{handleNameField:function(e){return d(e.target.value)},handleNumberField:function(e){return x(e.target.value)},handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===l.trim().toLowerCase()}));void 0!==n?window.confirm("".concat(n.name," already exists in the notebook, do you want to replace the old number with a new one?"))&&s.update(Object(i.a)(Object(i.a)({},n),{},{number:p})).then((function(e){var n=t.map((function(n){return n.id===e.id?e:n}));r(n),J(),E({main:"green",back:"#ccffcc"}),y("Updated ".concat(e.name)),setTimeout((function(){y(null)}),5e3)})).catch((function(e){r(t.filter((function(e){return e.id!==n.id}))),E({main:"firebrick",back:"#ffcccc"}),y("".concat(n.name," has already been removed from the server")),setTimeout((function(){y(null)}),5e3)})):s.add({name:l.trim(),number:p}).then((function(e){r(t.concat(e)),J(),E({main:"green",back:"#ccffcc"}),y("Added ".concat(e.name)),setTimeout((function(){y(null)}),5e3)})).catch((function(e){console.log(e.response.data),E({main:"firebrick",back:"#ffcccc"}),y(e.response.data.error),setTimeout((function(){y(null)}),5e3)}))},newName:l,newNumber:p}),Object(m.jsx)(v,{message:S,color:L}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(h,{persons:t,nameFilter:k,removeName:function(e,n){window.confirm("Remove ".concat(e,"?"))&&s.remove(n).then((function(){r(t.filter((function(e){return e.id!==n}))),E({main:"green",back:"#ccffcc"}),y("Removed ".concat(e)),setTimeout((function(){y(null)}),5e3)}))}})]})};a.a.render(Object(m.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ea2dfd01.chunk.js.map